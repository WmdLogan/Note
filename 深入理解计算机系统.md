# 深入理解计算机系统

## 第一章 计算机系统漫游

- 

```
gcc -o hello hello.c
```

- **hello.c** -> 预处理器(cpp) -> **hello.i** -> 编译器(ccl) -> **hello.s** ->汇编器(as) -> **hello.o **->链接器(ld)  -> **hello**
  - hello.i：修改了的源程序（文本）
  - hello.s：汇编语言程序（文本）
  - hello.o：可重定位的目标程序 —— 打包机器语言指令（二进制）
  - hello：可执行目标程序（二进制），可以被加载到内存中，由系统执行

- **链接阶段**：将例如 printf.o 这些预编译好的单独文件合并到我们的程序中
- 计算机硬件组成
  - 总线被设计成传送定长的字节块，也就是**字（word）**，字长4个字节是32位系统，8个字节是64位系统
  - I/O设备通过**控制器或者适配器**与I/O总线相连，控制器和适配器的区别在于它们的组装方式。
- 程序的机器指令：磁盘 -> 主存 -> 处理器
- 上下文：操作系统保持跟踪进程运行所需的所有状态信息，包括PC、寄存器文件的当前值、主存的内容，操作系统通过上         下文切换来切换进程运行，即保存当前进程的上下文、恢复新进程的上下文，然后将控制权传递到新进程
- 从一个进程到另一个进程的转换就是由操作系统**内核**管理的。**内核**是操作系统代码常驻主存的部分
- 进程的虚拟内存空间（P13）地址从小到大如下：
  - 程序代码和数据。对所有进程来说，代码从同一固定位置开始，紧接着是数据位置
  - 堆。malloc和free
  - 共享库。如C标准库和数学库
  - 内核虚拟内存。程序必须通过调用内核来读写这个区的内容或者调用内核代码定义的函数
- 线程级并发，指令级并行
- 操作系统内核时应用程序和硬件之间的媒介，提供了三个基本的抽象
  - 文件是对I/O设备的抽象
  - 虚拟内存是对主存和磁盘的抽象
  - 进程是对处理器、主存和I/O设备的抽象